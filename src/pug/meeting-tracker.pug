extends layout

block head
  title= title || 'Meeting Tracker - Get Sober Spokane'
  meta(name="description" content="Log your attendance at recovery meetings (AA, NA, Smart Recovery) and track your commitment.")

block content
  .container.py-5.mt-5
    .row.mb-4
      .col-lg-8.mx-auto.text-center
        h2.text-primary.mb-3 Meeting Tracker
        p.lead.text-muted "Keep coming back, it works if you work it."

    .row
      // Log Meeting Column
      .col-lg-5.mb-4
        .card.shadow-sm.h-100
          .card-header.bg-success.text-white
            h5.mb-0 
              i.bi.bi-check-circle.me-2
              | Log Attendance
          .card-body
            form#meetingForm
              // Meeting Type
              .mb-3
                label.form-label.fw-bold Meeting Type
                select#meetingType.form-select(required)
                  option(value="" selected disabled) Select type...
                  option(value="AA") Alcoholics Anonymous (AA)
                  option(value="NA") Narcotics Anonymous (NA)
                  option(value="Smart") Smart Recovery
                  option(value="Celebrate") Celebrate Recovery
                  option(value="Other") Other

              // Meeting Name
              .mb-3
                label.form-label.fw-bold Group Name / Location
                input#meetingName.form-control(type="text" placeholder="e.g., Sunday Morning Serenity" required)

              // Notes
              .mb-3
                label.form-label.fw-bold Key Takeaways
                textarea#meetingNotes.form-control(rows="3" placeholder="What stood out to you today?")

              button.btn.btn-success.w-100.py-2(type="submit")
                i.bi.bi-plus-circle.me-2
                | Log Meeting

      // History Column
      .col-lg-7
        .card.shadow-sm
          .card-header.bg-light.d-flex.justify-content-between.align-items-center
            h5.mb-0 
              i.bi.bi-clock-history.me-2
              | Attendance History
            button#refreshMeetings.btn.btn-sm.btn-outline-success
              i.bi.bi-arrow-clockwise

          .card-body.p-0
            #meetingList.list-group.list-group-flush
              .text-center.py-4.text-muted
                .spinner-border.spinner-border-sm.text-success.me-2
                | Loading history...

block scripts
  script(src="/js/gamification.js")
  script(src="/js/meeting-tracker.js")
