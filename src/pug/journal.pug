extends layout

block head
  title= title || 'My Sober Journal - Get Sober Spokane'
  meta(name="description" content="Track your recovery journey, monitor your mood, and practice daily gratitude.")
  
  style.
    .journal-mood-slider {
      width: 100%;
      margin: 20px 0;
    }
    .mood-emoji {
      font-size: 2rem;
      transition: transform 0.2s;
      cursor: pointer;
    }
    .mood-emoji:hover {
      transform: scale(1.2);
    }
    .mood-option input[type="radio"] {
      display: none;
    }
    .mood-option input[type="radio"]:checked + label {
      transform: scale(1.3);
      text-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    .entry-card {
      border-left: 4px solid #f4623a;
      transition: transform 0.2s;
    }
    .entry-card:hover {
      transform: translateX(5px);
    }

block content
  .container.py-5.mt-5
    .row.mb-4
      .col-lg-8.mx-auto.text-center
        h2.text-primary.mb-3 My Sober Journal
        p.lead.text-muted "One day at a time." Track your progress and feelings.

    .row
      // New Entry Column
      .col-lg-5.mb-4
        .card.shadow-sm.h-100
          .card-header.bg-primary.text-white
            h5.mb-0 
              i.bi.bi-pencil-square.me-2
              | Daily Check-in
          .card-body
            form#journalForm
              // Mood Selection
              .mb-4.text-center
                label.form-label.fw-bold How are you feeling today?
                .d-flex.justify-content-between.px-2.mt-2
                  .mood-option
                    input#mood1(type="radio" name="mood" value="1" required)
                    label.mood-emoji(for="mood1" title="Struggling") üò´
                  .mood-option
                    input#mood2(type="radio" name="mood" value="2")
                    label.mood-emoji(for="mood2" title="Sad") üò¢
                  .mood-option
                    input#mood3(type="radio" name="mood" value="3")
                    label.mood-emoji(for="mood3" title="Anxious") üò∞
                  .mood-option
                    input#mood4(type="radio" name="mood" value="4")
                    label.mood-emoji(for="mood4" title="Okay") üòê
                  .mood-option
                    input#mood5(type="radio" name="mood" value="5")
                    label.mood-emoji(for="mood5" title="Good") üôÇ
                  .mood-option
                    input#mood6(type="radio" name="mood" value="6")
                    label.mood-emoji(for="mood6" title="Great") üòÑ
                  .mood-option
                    input#mood7(type="radio" name="mood" value="7")
                    label.mood-emoji(for="mood7" title="Amazing") ü§©

              // Gratitude
              .mb-3
                label.form-label.fw-bold(for="gratitude")
                  i.bi.bi-heart-fill.text-danger.me-2
                  | One thing I'm grateful for:
                input#gratitude.form-control(type="text" placeholder="e.g., My family, sunshine, warm coffee..." required)

              // Notes
              .mb-3
                label.form-label.fw-bold(for="notes") Daily Notes
                textarea#notes.form-control(rows="4" placeholder="How was your day? Any triggers or victories?")

              button.btn.btn-primary.w-100.py-2(type="submit")
                i.bi.bi-save.me-2
                | Save Entry

      // History Column
      .col-lg-7
        // Chart
        .card.shadow-sm.mb-4
          .card-header.bg-light
            h5.mb-0 
              i.bi.bi-graph-up.me-2
              | Mood History (Last 7 Days)
          .card-body
            canvas#moodChart(height="150")

        // Recent Entries List
        .card.shadow-sm
          .card-header.bg-light.d-flex.justify-content-between.align-items-center
            h5.mb-0 
              i.bi.bi-journal-bookmark.me-2
              | Recent Entries
            button#refreshEntries.btn.btn-sm.btn-outline-primary
              i.bi.bi-arrow-clockwise

          .card-body.p-0
            #journalEntriesList.list-group.list-group-flush
              .text-center.py-4.text-muted
                .spinner-border.spinner-border-sm.text-primary.me-2
                | Loading entries...

block scripts
  // Chart.js from CDN
  script(src="https://cdn.jsdelivr.net/npm/chart.js")
  script(src="/js/gamification.js")
  script(src="/js/journal.js")
